<!-- <!DOCTYPE html>
<html>
<head>
    <title>Form Example</title>
</head>
<body>

<form id="searchForm" action="/search" method="get">
    name:
    <input type="text" name="search_query" value="smit">
    <br>
    <label for="location">location:</label>
    <input type="text" name="location" id="location">
    <br>
    Course:
    <input type="text" name="course">
    <br>
    <label for="university">University:</label>
    <select name="university" id="university">
        <option value="all">ALL</option>
        <option value="daiict">daiict</option>
        <option value="nirma">nirma</option>
    </select>
    <br>
    <input type="submit" value="Search">
</form>

<script>
    // Add a submit event listener to the form
    document.getElementById("searchForm").addEventListener("submit", function (event) {
        // Get the form elements
        var nameInput = this.elements["search_query"];
        var locationInput = this.elements["location"];
        var courseInput = this.elements["course"];
        var universitySelect = this.elements["university"];

        // Check if the "s" query parameter is empty and remove it
        if (nameInput.value === "") {
            nameInput.removeAttribute("name");
        }

        // Check if the "location" query parameter is empty and remove it
        if (locationInput.value === "") {
            locationInput.removeAttribute("name");
        }

        // Check if the "course" query parameter is empty and remove it
        if (courseInput.value === "") {
            courseInput.removeAttribute("name");
        }

        // Check if the "university" is not selected, and remove it if it's empty
        if (universitySelect.selectedIndex === 0) {
            universitySelect.removeAttribute("name");
        }
    });
</script>

</body>
</html> -->

<!DOCTYPE html>
<html>
<head>
    <title>Search Form</title>
</head>
<body>
    <form id="searchForm" action="/search" method="get">
        name:
        <input type="text" name="search_query" >
        <br>
        <label for="location">location:</label>
        <input type="text" name="location" id="location">
        <br>
         
        <br>
        <label for="university">University:</label>
        <select name="university" id="university">
            <option value="all">ALL</option>
            <option value="daiict">daiict</option>
            <option value="nirma">nirma</option>
        </select>
        <br>
        <input type="submit" value="Search" onclick="updateAction()">
    </form>

    <script>
        function updateAction() {

        var nameInput = document.getElementById("searchForm").elements["search_query"];
        var locationInput = document.getElementById("searchForm").elements["location"];
        var courseInput = document.getElementById("searchForm").elements["course"];
        var universitySelect = document.getElementById("searchForm").elements["university"];

        // Check if the "s" query parameter is empty and remove it
        if (nameInput.value === "") {
            nameInput.removeAttribute("name");
        }

        // Check if the "location" query parameter is empty and remove it
        if (locationInput.value === "") {
            locationInput.removeAttribute("name");
        }

        // Check if the "course" query parameter is empty and remove it
        if (courseInput.value === "") {
            courseInput.removeAttribute("name");
        }

        // Check if the "university" is not selected, and remove it if it's empty
        if (universitySelect.selectedIndex === 0) {
            universitySelect.removeAttribute("name");
        }







            // var form = document.getElementById("searchForm");
            // var searchQuery = form.elements["search_query"].value;
            // var location = form.elements["location"].value;
            // var course = form.elements["course"].value;
            // var university = form.elements["university"].value;

            // var action = "/search?";



            




            // if (searchQuery !=="") {
            //     action += "search_query=" + encodeURIComponent(searchQuery) + "&";
            // }
            // if (location !=="") {
            //     action += "location=" + encodeURIComponent(location) + "&";
            // }
            // if (course !=="") {
            //     action += "course=" + encodeURIComponent(course) + "&";
            // }
            // if (university !=="") {
            //     action += "university=" + encodeURIComponent(university) + "&";
            // }

            // // Remove the trailing '&' character if it exists
            // action = action.replace(/&$/, "");

            // form.action = action;
        }
    </script>
</body>
</html>




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="search.css">
<div id="search" style="margin-top: 10px;">
    <form id="searchForm" action="/search" method="get">
        <div id="search_first">
            <input type="text" placeholder="Search.." name="search2" value="{{searchdata.search_query}}"
                class="main_part">
        </div>
        {{!-- <label for="location">location:</label>
        <input type="text" name="location" id="location">
        <br> --}}
        <div id="university" class="main_part">
            <label for="course">Course:</label>
            <select name="course" >
                <option value="all">ALL</option>
                {{!-- <option value="daiict" {{#if (eq serachdata.university2 "daiict" )}}selected{{/if}}>daiict
                </option>
                <option value="nirma" {{#if (eq serachdata.university2 "nirma" )}}selected{{/if}}>nirma</option> --}}

                {{#each universityoption}}
                <option value="{{this.university}}" {{#if (eq university2 this.university)}}selected{{/if}}>
                    {{this.university}}</option>
                {{/each}}
            </select>
        </div>
        <div id="university" class="main_part">
            <label for="university">University:</label>
            <select name="university" >
                <option value="all">ALL</option>
                {{!-- <option value="daiict" {{#if (eq serachdata.university2 "daiict" )}}selected{{/if}}>daiict
                </option>
                <option value="nirma" {{#if (eq serachdata.university2 "nirma" )}}selected{{/if}}>nirma</option> --}}

                {{#each universityoption}}
                <option value="{{this.university}}" {{#if (eq university2 this.university)}}selected{{/if}}>
                    {{this.university}}</option>
                {{/each}}
            </select>
            <button type="submit" onclick="updateAction()"><i class="fa fa-search"></i></button>
        </div>
    </form>
</div>
